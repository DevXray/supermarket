<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Supermarket Management System</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>üè™ Supermarket Management System</h1>
            <p class="subtitle">Kelola produk, supplier, dan transaksi dengan mudah</p>
            <div style="position: absolute; top: 20px; right: 20px; text-align: right;">
                <div id="userInfo" style="color: #667eea; font-weight: 600; margin-bottom: 5px;"></div>
                <button onclick="logout()" class="btn btn-danger btn-sm">üö™ Logout</button>
            </div>
        </header>

        <div class="tabs">
            <button class="tab active" onclick="showTab('dashboard')">üìä Dashboard</button>
            <button class="tab" onclick="showTab('pos')">üõí Kasir (POS)</button>
            <button class="tab" onclick="showTab('products')">üì¶ Produk</button>
            <button class="tab" onclick="showTab('suppliers')">üè¢ Supplier</button>
            <button class="tab" onclick="showTab('sales')">üí∞ Riwayat Penjualan</button>
            <button class="tab" onclick="showTab('inventory')">üìã Inventori</button>
            <button class="tab" onclick="showTab('users')">üë• Manajemen User</button>
        </div>

        <!-- Dashboard Tab -->
        <div id="dashboard" class="tab-content active">
            <h2 style="margin-bottom: 20px;">Dashboard</h2>
            <div class="stats" id="stats">
                <div class="stat-card">
                    <h3>Total Produk</h3>
                    <div class="value" id="totalProducts">-</div>
                </div>
                <div class="stat-card">
                    <h3>Total Supplier</h3>
                    <div class="value" id="totalSuppliers">-</div>
                </div>
                <div class="stat-card">
                    <h3>Total Penjualan</h3>
                    <div class="value" id="totalSales">-</div>
                </div>
                <div class="stat-card">
                    <h3>Nilai Inventori</h3>
                    <div class="value" id="totalInventory">-</div>
                </div>
            </div>

            <h3 style="margin-bottom: 15px;">‚ö†Ô∏è Alert Stok Rendah</h3>
            <div id="lowStockAlert">
                <div class="loading">Memuat data...</div>
            </div>
        </div>

        <!-- POS Tab -->
        <div id="pos" class="tab-content">
            <h2 style="margin-bottom: 20px;">üõí Kasir (Point of Sale)</h2>
            
            <div class="grid-2">
                <div>
                    <h3>Pilih Produk</h3>
                    <div class="form-group">
                        <label>Cari Produk</label>
                        <input type="text" id="searchProduct" placeholder="Cari nama atau kode produk...">
                    </div>
                    <div id="productListPOS" style="max-height: 500px; overflow-y: auto;">
                        <div class="loading">Memuat produk...</div>
                    </div>
                </div>

                <div>
                    <h3>Keranjang Belanja</h3>
                    <div id="cart" style="min-height: 300px;">
                        <div class="alert alert-info">Keranjang masih kosong. Pilih produk untuk memulai transaksi.</div>
                    </div>
                    
                    <div style="margin-top: 20px; padding: 20px; background: #f9fafb; border-radius: 8px;">
                        <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                            <strong>Subtotal:</strong>
                            <span id="cartSubtotal">Rp 0</span>
                        </div>
                        <div style="display: flex; justify-content: space-between; margin-bottom: 10px; color: #ef4444;">
                            <strong>Diskon:</strong>
                            <span id="cartDiscount">Rp 0</span>
                        </div>
                        <div style="display: flex; justify-content: space-between; font-size: 20px; font-weight: bold; padding-top: 10px; border-top: 2px solid #e0e0e0;">
                            <span>TOTAL:</span>
                            <span id="cartTotal">Rp 0</span>
                        </div>
                    </div>

                    <div style="margin-top: 20px; display: flex; gap: 10px;">
                        <button class="btn btn-danger" onclick="clearCart()" style="flex: 1;">üóëÔ∏è Kosongkan</button>
                        <button class="button" onclick="processPayment()" style="flex: 2;">
                            <span class="shadow"></span>
                            <span class="edge"></span>
                            <div class="front">
                                <span>üí≥ Bayar</span>
                            </div>
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Products Tab -->
        <div id="products" class="tab-content">
            <h2 style="margin-bottom: 20px;">Manajemen Produk</h2>
            
            <div class="grid-2">
                <div>
                    <h3>Tambah Produk Baru</h3>
                    <form id="productForm">
                        <div class="form-group">
                            <label>Nama Produk *</label>
                            <input type="text" id="productName" required>
                        </div>
                        <div class="form-group">
                            <label>Kategori *</label>
                            <select id="productCategory" required onchange="generateProductCode()">
                                <option value="">Pilih Kategori</option>
                                <option value="FOOD">Makanan</option>
                                <option value="ELECTRONIC">Elektronik</option>
                                <option value="CLOTHING">Pakaian</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Kode Produk *</label>
                            <input type="text" id="productCode" required readonly style="background-color: #f3f4f6; cursor: not-allowed;">
                            <small style="color: #6b7280;">Kode otomatis dibuat berdasarkan kategori</small>
                        </div>
                        <div class="form-group">
                            <label>Harga *</label>
                            <input type="number" id="productPrice" required min="0">
                        </div>
                        <div class="form-group">
                            <label>Stok *</label>
                            <input type="number" id="productStock" required min="0">
                        </div>
                        <div class="form-group">
                            <label>Minimum Stok *</label>
                            <input type="number" id="productMinStock" required min="0">
                        </div>
                        <div class="form-group">
                            <label>Supplier *</label>
                            <select id="productSupplier" required>
                                <option value="">Pilih Supplier</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Deskripsi</label>
                            <textarea id="productDesc" rows="3"></textarea>
                        </div>
                        <button type="submit" class="btn btn-primary">‚ûï Tambah Produk</button>
                    </form>
                </div>

                <div>
                    <h3>Daftar Produk</h3>
                    <div id="productList">
                        <div class="loading">Memuat data...</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Suppliers Tab -->
        <div id="suppliers" class="tab-content">
            <h2 style="margin-bottom: 20px;">Manajemen Supplier</h2>
            
            <div class="grid-2">
                <div>
                    <h3>Tambah Supplier Baru</h3>
                    <form id="supplierForm">
                        <div class="form-group">
                            <label>Nama Supplier *</label>
                            <input type="text" id="supplierName" required>
                        </div>
                        <div class="form-group">
                            <label>Kode Supplier *</label>
                            <input type="text" id="supplierCode" required readonly style="background-color: #f3f4f6; cursor: not-allowed;">
                            <small style="color: #6b7280;">Kode otomatis: SUP001, SUP002, dst.</small>
                        </div>
                        <div class="form-group">
                            <label>Contact Person *</label>
                            <input type="text" id="supplierContact" required>
                        </div>
                        <div class="form-group">
                            <label>Telepon *</label>
                            <input type="tel" id="supplierPhone" required>
                        </div>
                        <div class="form-group">
                            <label>Email *</label>
                            <input type="email" id="supplierEmail" required>
                        </div>
                        <div class="form-group">
                            <label>Alamat *</label>
                            <textarea id="supplierAddress" rows="3" required></textarea>
                        </div>
                        <button type="submit" class="btn btn-primary">‚ûï Tambah Supplier</button>
                    </form>
                </div>

                <div>
                    <h3>Daftar Supplier</h3>
                    <div id="supplierList">
                        <div class="loading">Memuat data...</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Sales Tab -->
        <div id="sales" class="tab-content">
            <h2 style="margin-bottom: 20px;">üí∞ Riwayat Transaksi Penjualan</h2>
            <div id="salesList">
                <div class="loading">Memuat data...</div>
            </div>
        </div>

        <!-- Inventory Tab -->
        <div id="inventory" class="tab-content">
            <h2 style="margin-bottom: 20px;">Laporan Inventori</h2>
            <div id="inventoryReport">
                <div class="loading">Memuat data...</div>
            </div>
        </div>

        <!-- Users Management Tab -->
        <div id="users" class="tab-content">
            <h2 style="margin-bottom: 20px;">üë• Manajemen User</h2>
            
            <div class="grid-2">
                <div>
                    <h3 id="userFormTitle">Tambah User Baru</h3>
                    <form id="userForm">
                        <input type="hidden" id="userId">
                        <input type="hidden" id="isEditMode">
                        
                        <div class="form-group">
                            <label>Username *</label>
                            <input type="text" id="userUsername" required minlength="3">
                            <small style="color: #6b7280;">Minimal 3 karakter</small>
                        </div>
                        
                        <div class="form-group">
                            <label>Password * <span id="passwordLabel">(minimal 6 karakter)</span></label>
                            <input type="password" id="userPassword" minlength="6">
                            <small style="color: #6b7280;">Biarkan kosong jika tidak ingin mengubah password (saat edit)</small>
                        </div>
                        
                        <div class="form-group">
                            <label>Nama Lengkap *</label>
                            <input type="text" id="userFullName" required>
                        </div>
                        
                        <div class="form-group">
                            <label>Status</label>
                            <select id="userActive">
                                <option value="true">Aktif</option>
                                <option value="false">Tidak Aktif</option>
                            </select>
                        </div>

                        <div style="display: flex; gap: 10px;">
                            <button type="submit" class="btn btn-primary" id="userSubmitBtn">‚ûï Tambah User</button>
                            <button type="button" class="btn btn-warning" id="userCancelBtn" onclick="cancelEditUser()" style="display: none;">‚ùå Batal</button>
                        </div>
                    </form>
                </div>

                <div>
                    <h3>Daftar User</h3>
                    <div id="userList">
                        <div class="loading">Memuat data...</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="script.js"></script>
</body>
</html>